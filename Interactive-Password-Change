#!/bin/bash

# Check if the script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "This script must be run as root. Use sudo."
  exit 1
fi

# Prompt for new password
read -s -p "Enter new password for user 'plinktern': " NEW_PASSWORD
echo
read -s -p "Confirm new password: " CONFIRM_PASSWORD
echo

# Validate password match
if [ "$NEW_PASSWORD" != "$CONFIRM_PASSWORD" ]; then
  echo "❌ Passwords do not match. Aborting."
  exit 1
fi

# Change the password using chpasswd
echo "$USERNAME:$NEW_PASSWORD" | chpasswd

# Verify the password change
if [ $? -eq 0 ]; then
  echo "✅ Password for user 'plinktern' has been successfully changed."
else
  echo "❌ Failed to change password for user 'plinktern'."
fi
